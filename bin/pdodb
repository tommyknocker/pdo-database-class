#!/usr/bin/env php
<?php

declare(strict_types=1);

/**
 * PDOdb CLI Tool
 *
 * Usage:
 *   vendor/bin/pdodb <command> [subcommand] [arguments] [options]
 *
 * Examples:
 *   vendor/bin/pdodb migrate create create_users_table
 *   vendor/bin/pdodb migrate up
 *   vendor/bin/pdodb schema inspect users
 *   vendor/bin/pdodb query test "SELECT * FROM users"
 *   vendor/bin/pdodb model make User
 */

// Try to load autoload.php from library root (for development)
$autoloadPath = __DIR__ . '/../vendor/autoload.php';
if (!file_exists($autoloadPath)) {
    // Try to load from project root (when installed via Composer)
    $autoloadPath = __DIR__ . '/../../autoload.php';
}

if (!file_exists($autoloadPath)) {
    fwrite(STDERR, "Error: Could not find autoload.php. Please run 'composer install'.\n");
    exit(1);
}

require_once $autoloadPath;

use tommyknocker\pdodb\cli\Application;

$application = new Application();
exit($application->run($argv));

